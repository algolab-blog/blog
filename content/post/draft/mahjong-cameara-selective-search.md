+++
author = "Shinpei Kawahito"
date = "2016-08-17T15:28:18+09:00"
draft = true
title = "麻雀カメラプロジェクト再始動？ 〜dlib + Selective Search (R-CNN) で牌検出を試みる〜"
+++

2014年の終わり頃に「麻雀カメラ」というiPhoneアプリを作っていました。  
カメラをかざすだけで麻雀の得点計算を行ってくれるアプリです。

{{<youtube "livDDcygEDU">}}

動画を見ていただければ一目瞭然ですが、さすがに実用では使えない、ということでお蔵入りしました...。  
あれから一年半、技術の進歩は目覚ましく、いまならば良いものが作れるのでは？と思い立ち、再挑戦してみることにしました。


## 個別の牌を検出するのが難しい
画像に何が写っているか判定するためには、大きく「検出 (Detection)」と「認識 (Recognition)」というプロセスに分かれます。

* 検出: aa
* 認識: bb

## 当時用いていたアルゴリズム
以下のように、古典的な手法で判定を行っていました。

1. カメラの画像を二値化する
1. 二値化画像から、輪郭を抽出する
1. 抽出した輪郭を、頂点数や領域サイズの条件で絞りこむ
1. 絞りこんだ輪郭の外接矩形を手牌領域とみなす
1. 手牌領域に対し、テンプレートマッチングを行う
1. スコアが一番高い領域・牌を確定させる
1. 確定した箇所を除き、テンプレートマッチングを繰り返す
1. スコアが閾値を超えなくなったら終了

## Selective Search
DeepLearning界隈では、物体検出

## dlibのインストール
Python版が公開されているので、インストールします。  
筆者はPython環境にAnacondaを用いているので、conda経由でインストールを行いました。

```sh
conda install -c mempo dlib
```

Anacondaを用いたPython環境構築については下記の記事が詳しいです。  
[データサイエンティストを目指す人のpython環境構築 2016](http://qiita.com/y__sama/items/5b62d31cb7e6ed50f02c)

領域
Faster R-CNN
